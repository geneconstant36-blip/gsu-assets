<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Path of the Peacemaker | GSU Historification</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0f172a; color: #e2e8f0; line-height: 1.6; }
        .nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: rgba(0, 0, 0, 0.5); border-bottom: 1px solid rgba(239, 68, 68, 0.2); }
        .logo { font-weight: 700; color: #ef4444; letter-spacing: 1px; text-transform: uppercase; }
        .wrap { max-width: 800px; margin: 0 auto; padding: 20px; }
        
        /* Dashboard Stats */
        .dash { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px; }
        .stat-box { background: rgba(239, 68, 68, 0.05); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; padding: 15px; text-align: center; transition: all 0.3s ease; }
        .stat-label { font-size: 12px; text-transform: uppercase; color: #94a3b8; letter-spacing: 1px; }
        .stat-val { font-size: 28px; font-weight: 800; color: #fff; font-variant-numeric: tabular-nums; }
        .unity { color: #4ade80; }
        .honor { color: #fbbf24; }
        .danger { background: rgba(248, 113, 113, 0.1); border-color: #f87171; }
        
        /* Game Area */
        .scene-card { background: #1e293b; border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 30px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-top: 3px solid #ef4444; }
        .scene-title { font-size: 24px; color: #ef4444; margin-bottom: 15px; border-bottom: 1px solid rgba(239, 68, 68, 0.2); padding-bottom: 10px; }
        .scene-desc { font-size: 18px; margin-bottom: 25px; }
        
        /* Choices */
        .choice-btn { display: block; width: 100%; text-align: left; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 16px 20px; margin-bottom: 12px; border-radius: 8px; font-size: 16px; cursor: pointer; transition: all 0.2s ease; }
        .choice-btn:hover { background: rgba(239, 68, 68, 0.1); border-color: #ef4444; transform: translateX(5px); }
        
        /* GENO Feedback Area */
        .feedback-area { display: none; background: rgba(56, 189, 248, 0.1); border-left: 4px solid #38bdf8; padding: 20px; border-radius: 0 8px 8px 0; margin-top: 20px; }
        .feedback-title { font-weight: 700; color: #38bdf8; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .next-btn { background: #ef4444; color: #fff; border: none; padding: 12px 24px; font-size: 16px; font-weight: 700; border-radius: 6px; cursor: pointer; margin-top: 20px; text-transform: uppercase; }
        .next-btn:hover { background: #dc2626; }
        
        @media (max-width: 600px) { .dash { grid-template-columns: 1fr; gap: 10px; } }
    </style>
</head>
<body>

<div class="nav">
    <div class="logo">GSU Historification</div>
    <div style="font-size: 14px; color: #94a3b8;">Level 2: Historical Simulation</div>
</div>

<div class="wrap">
    <div class="dash">
        <div class="stat-box" id="box-unity">
            <div class="stat-label">Five Nations Unity</div>
            <div class="stat-val unity" id="v-unity">20%</div>
        </div>
        <div class="stat-box" id="box-honor">
            <div class="stat-label">Clan Mother's Honor</div>
            <div class="stat-val honor" id="v-honor">50 / 100</div>
        </div>
    </div>

    <div class="scene-card" id="game-card">
        <h2 class="scene-title" id="s-title">The Endless War</h2>
        <div class="scene-desc" id="s-desc">
            You live in a time of endless fighting. The five nations are constantly at war. You have just met a man named Dekanawida, the Great Peacemaker, and his friend Hiawatha. They want to unite the tribes. Will you help them bring peace to the Longhouse, or will the cycle of revenge continue?
        </div>
        
        <div id="choices-area">
            <button class="choice-btn" onclick="startGame()">Begin the Journey</button>
        </div>

        <div class="feedback-area" id="feedback-area">
            <div class="feedback-title">ðŸ¤– GENO Says:</div>
            <div id="f-text"></div>
            <button class="next-btn" onclick="nextTask()">Continue âž”</button>
        </div>
    </div>
</div>

<script>
    let state = { unity: 20, honor: 50, task: 0 };

    const tasks = [
        {
            title: "Challenge 1: The Rival Village",
            desc: "You are traveling with Hiawatha. A warrior from a rival nation blocks your path. He insults your family for a battle that happened years ago. How do you respond?",
            choices: [
                {
                    text: "Draw your weapon and fight him! Honor demands revenge.",
                    uniEffect: -20, honEffect: -20,
                    feedback: "You chose violence. This is exactly why the endless war continues! By seeking revenge, you endangered the peace mission."
                },
                {
                    text: "Ignore him and run away into the forest.",
                    uniEffect: 0, honEffect: -10,
                    feedback: "Running away kept you safe, but it didn't solve the problem. A true leader must face conflict with words, not fear."
                },
                {
                    text: "Lower your weapon and speak to him about Dekanawida's vision of a united people.",
                    uniEffect: +20, honEffect: +10,
                    feedback: "Excellent! You used your words (Rhetoric) to stop a fight. The warrior listens to your message of peace and lets you pass."
                }
            ]
        },
        {
            title: "Challenge 2: The Clan Mother's Choice",
            desc: "You arrive at a new village. Before you can speak to the warriors, you must seek permission from the Clan Mother. She tests you: 'Why should we trust strangers who speak of peace?'",
            choices: [
                {
                    text: "'Because the men have decided it is time for peace, and you must follow.'",
                    uniEffect: -10, honEffect: -40,
                    feedback: "A terrible mistake. In the Iroquois Confederacy, the Clan Mothers hold the true power and choose the chiefs! You disrespected her, and she refuses to let you speak."
                },
                {
                    text: "'Because our children deserve to grow up planting the Three Sistersâ€”corn, beans, and squashâ€”without fear of war.'",
                    uniEffect: +30, honEffect: +30,
                    feedback: "A beautiful answer. You respected the Clan Mother's desire to protect her people and their way of life. She grants you permission to speak to the village."
                }
            ]
        },
        {
            title: "Challenge 3: The Grand Council",
            desc: "The leaders of the five nations have gathered around the central fire. They are trying to make a decision, but two nations completely disagree. What is the rule of the Grand Council?",
            choices: [
                {
                    text: "Take a vote. If three nations agree, the other two are forced to obey. Majority rules!",
                    uniEffect: -20, honEffect: 0,
                    feedback: "Incorrect. The Iroquois Confederacy did not use simple majority rule. That creates bitterness. They used 'consensus.'"
                },
                {
                    text: "Keep talking and adjusting the plan until ALL five nations agree on a solution.",
                    uniEffect: +30, honEffect: +10,
                    feedback: "Exactly! That is called 'consensus.' They kept talking until everyone felt heard and a fair agreement was reached. This idea inspired the Founding Fathers!"
                }
            ]
        },
        {
            title: "Challenge 4: The Tree of Peace",
            desc: "The five nations have finally agreed to unite! Dekanawida brings forth a giant white pine tree. What must the warriors do to prove they are done fighting?",
            choices: [
                {
                    text: "Bury their weapons beneath the roots of the tree.",
                    uniEffect: +20, honEffect: +10,
                    feedback: "Yes! They buried their weapons of war under the Tree of Peace. The eagle at the top will watch for danger, and the roots will spread peace in all four directions."
                },
                {
                    text: "Burn their weapons in the central council fire.",
                    uniEffect: -10, honEffect: 0,
                    feedback: "Not quite. They buried them beneath the roots of the great white pine, which became known as the Tree of Peace."
                }
            ]
        }
    ];

    function updateDash() {
        document.getElementById('v-unity').textContent = state.unity + "%";
        document.getElementById('v-honor').textContent = state.honor + " / 100";
        
        let uniBox = document.getElementById('box-unity');
        if (state.unity < 20) uniBox.classList.add('danger');
        else uniBox.classList.remove('danger');
        
        let honBox = document.getElementById('box-honor');
        if (state.honor < 30) honBox.classList.add('danger');
        else honBox.classList.remove('danger');
    }

    function speak(text) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            let msg = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(msg);
        }
    }

    function startGame() {
        state.unity = 20;
        state.honor = 50;
        state.task = 0;
        updateDash();
        loadTask();
    }

    function loadTask() {
        if (state.unity <= 0 || state.honor <= 0) {
            gameOver("The cycle of violence continues. You failed to build consensus and lost the respect of the Clan Mothers. The Confederacy has broken apart.");
            return;
        }

        if (state.task >= tasks.length) {
            gameWin();
            return;
        }

        let task = tasks[state.task];
        document.getElementById('s-title').textContent = task.title;
        document.getElementById('s-desc').textContent = task.desc;
        
        let choicesHTML = "";
        task.choices.forEach((choice, idx) => {
            choicesHTML += `<button class="choice-btn" onclick="makeChoice(${idx})">${choice.text}</button>`;
        });
        
        document.getElementById('choices-area').innerHTML = choicesHTML;
        document.getElementById('choices-area').style.display = "block";
        document.getElementById('feedback-area').style.display = "none";
    }

    function makeChoice(idx) {
        let choice = tasks[state.task].choices[idx];
        
        state.unity += choice.uniEffect;
        if (state.unity > 100) state.unity = 100;
        state.honor += choice.honEffect;
        if (state.honor > 100) state.honor = 100;
        updateDash();

        document.getElementById('choices-area').style.display = "none";
        document.getElementById('f-text').innerHTML = `<strong>${choice.feedback}</strong>`;
        document.getElementById('feedback-area').style.display = "block";
        
        speak(choice.feedback);
    }

    function nextTask() {
        state.task++;
        loadTask();
    }

    function gameOver(reason) {
        document.getElementById('s-title').textContent = "ðŸ›‘ THE WARS CONTINUE";
        document.getElementById('s-title').style.color = "#f87171";
        document.getElementById('s-desc').textContent = reason;
        document.getElementById('choices-area').innerHTML = `<button class="choice-btn" style="text-align:center" onclick="startGame()">Try Again</button>`;
        document.getElementById('choices-area').style.display = "block";
        document.getElementById('feedback-area').style.display = "none";
        speak("The wars continue. Try again and choose the path of peace.");
    }

    function gameWin() {
        document.getElementById('s-title').textContent = "ðŸ¦… THE FIRST DEMOCRACY";
        document.getElementById('s-title').style.color = "#4ade80";
        
        let finalStatus = `You did it! With ${state.unity}% Unity and an Honor score of ${state.honor}, you helped Dekanawida and Hiawatha unite the Five Nations. You understand the power of consensus and the Great Law of Peace.`;

        document.getElementById('s-desc').textContent = finalStatus;
        document.getElementById('choices-area').innerHTML = `<button class="choice-btn" style="text-align:center" onclick="startGame()">Play Again</button>`;
        document.getElementById('choices-area').style.display = "block";
        document.getElementById('feedback-area').style.display = "none";
        speak("Congratulations! " + finalStatus);
    }
</script>

</body>
</html>