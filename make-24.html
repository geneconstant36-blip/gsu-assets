<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Make 24 Game | Number Puzzle Challenge | GSU Math</title>
<meta name="description" content="Use 4 numbers and any operations to make exactly 24. Classic math puzzle game with AI tutor. Free from Global Sovereign University.">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--navy:#0a0a1a;--deep:#1a1a3e;--purple:#6a1b9a;--gold:#ffd700;--cream:#f5f0e8;--slate:#94a3b8;--green:#4ade80;--red:#ef4444;--teal:#0f766e}
body{font-family:'Inter',sans-serif;background:linear-gradient(180deg,var(--navy),var(--deep),var(--navy));color:var(--cream);min-height:100vh}
.game-wrap{max-width:900px;margin:0 auto;padding:20px}

.nav-bar{display:flex;justify-content:space-between;align-items:center;padding:10px 0;margin-bottom:20px;border-bottom:1px solid rgba(255,255,255,.1)}
.nav-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:50px;font-size:13px;font-weight:600;text-decoration:none;transition:all .3s;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:var(--cream)}
.nav-btn:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.3)}
.nav-gsu{border-color:var(--gold);color:var(--gold)}
.nav-gsu:hover{background:rgba(255,215,0,.15)}

.header{text-align:center;padding:20px 0 15px}
.header h1{font-family:'Playfair Display',serif;font-size:2.5rem;color:white}
.header h1 span{color:var(--gold)}
.subtitle{color:var(--slate);font-size:.9rem;margin-top:5px}
.badge-tag{display:inline-block;background:linear-gradient(135deg,var(--purple),#9c27b0);color:var(--gold);padding:5px 16px;border-radius:50px;font-size:11px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:10px}

.geno-bar{display:flex;align-items:center;gap:12px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:18px;margin-bottom:20px}
.geno-img{width:55px;height:55px;border-radius:50%;border:2px solid var(--purple);object-fit:cover}
.geno-speech{flex:1;font-size:.9rem;color:var(--slate);line-height:1.5}
.geno-name{color:var(--gold);font-weight:700;margin-right:6px}

.controls{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap;align-items:center;justify-content:center}
.ctrl-select{padding:8px 14px;border-radius:8px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);color:var(--cream);font-size:.85rem;font-family:'Inter',sans-serif}
.ctrl-btn{padding:8px 18px;border-radius:8px;border:none;color:var(--cream);font-weight:600;cursor:pointer;font-size:.85rem;transition:all .2s}
.ctrl-btn.primary{background:var(--purple)}
.ctrl-btn.hint{background:rgba(255,215,0,.2);border:1px solid var(--gold);color:var(--gold)}
.ctrl-btn:hover{filter:brightness(1.2)}

.stats{display:flex;gap:15px;justify-content:center;margin:15px 0;flex-wrap:wrap}
.stat{text-align:center;padding:8px 16px;background:rgba(255,255,255,.04);border-radius:8px;border:1px solid rgba(255,255,255,.08)}
.stat-val{font-size:1.3rem;font-weight:800;color:var(--gold)}
.stat-lbl{font-size:.7rem;color:var(--slate);text-transform:uppercase;letter-spacing:1px}

.badges{display:flex;gap:8px;justify-content:center;margin:10px 0;flex-wrap:wrap}
.badge-pill{padding:6px 12px;border-radius:15px;font-size:.75rem;font-weight:600;opacity:.35}
.badge-pill.earned{opacity:1;box-shadow:0 2px 10px rgba(255,215,0,.3)}
.badge-pill.bronze{background:linear-gradient(135deg,#cd7f32,#8b4513);border:2px solid #cd7f32}
.badge-pill.silver{background:linear-gradient(135deg,#c0c0c0,#808080);border:2px solid #c0c0c0}
.badge-pill.gold{background:linear-gradient(135deg,var(--gold),#ffa000);border:2px solid var(--gold);color:var(--navy)}
.badge-pill.platinum{background:linear-gradient(135deg,#e5e4e2,#b4b4b4);border:2px solid #e5e4e2;color:var(--navy)}

/* Card Area */
.cards{display:flex;gap:15px;justify-content:center;margin:25px 0;flex-wrap:wrap}
.card{width:80px;height:110px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:800;cursor:pointer;transition:all .2s;border:2px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06)}
.card:hover{border-color:var(--gold);transform:translateY(-3px);box-shadow:0 8px 20px rgba(255,215,0,.15)}
.card.selected{border-color:var(--gold);background:rgba(255,215,0,.15);box-shadow:0 0 15px rgba(255,215,0,.3)}
.card.used{opacity:.25;pointer-events:none;transform:scale(.9)}

/* Operations */
.ops{display:flex;gap:10px;justify-content:center;margin:15px 0}
.op-btn{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.3rem;font-weight:700;cursor:pointer;transition:all .2s;border:2px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:var(--cream)}
.op-btn:hover{border-color:var(--purple);background:rgba(106,27,154,.3)}
.op-btn.selected{border-color:var(--purple);background:var(--purple);color:var(--gold)}

/* Expression Display */
.expression{text-align:center;margin:20px 0;min-height:50px}
.expr-display{font-size:1.5rem;font-weight:700;color:var(--cream);padding:15px;background:rgba(0,0,0,.3);border-radius:12px;border:1px solid rgba(255,255,255,.1);min-height:50px;display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap}
.expr-num{color:var(--gold)}
.expr-op{color:var(--purple);font-size:1.2rem}
.expr-result{margin-top:10px;font-size:1.1rem;font-weight:600}
.expr-result.success{color:var(--green)}
.expr-result.fail{color:var(--red)}

/* Action buttons */
.actions{display:flex;gap:10px;justify-content:center;margin:15px 0;flex-wrap:wrap}
.act-btn{padding:12px 24px;border-radius:10px;border:none;font-weight:700;cursor:pointer;font-size:.9rem;transition:all .2s}
.act-btn.check{background:var(--green);color:var(--navy)}
.act-btn.undo{background:rgba(255,255,255,.1);color:var(--cream);border:1px solid rgba(255,255,255,.15)}
.act-btn.skip{background:rgba(239,68,68,.2);color:var(--red);border:1px solid var(--red)}
.act-btn:hover{filter:brightness(1.1);transform:scale(1.03)}

/* Modal */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);z-index:1000;align-items:center;justify-content:center}
.modal.show{display:flex}
.modal-box{background:linear-gradient(135deg,var(--deep),var(--purple));border:3px solid var(--gold);border-radius:20px;padding:35px;text-align:center;max-width:400px;width:90%}
.modal-box h2{color:var(--gold);font-size:1.8rem;margin-bottom:10px}
.modal-box p{color:#b3e5fc;margin-bottom:15px;line-height:1.5}

.footer{text-align:center;padding:20px 0;margin-top:20px;border-top:1px solid rgba(255,255,255,.08);color:var(--slate);font-size:.8rem}
.footer a{color:var(--gold);text-decoration:none}

@media(max-width:500px){.card{width:65px;height:90px;font-size:1.6rem}.op-btn{width:42px;height:42px;font-size:1.1rem}}
</style>
</head>
<body>
<div class="game-wrap">

<div class="nav-bar">
  <a href="https://www.globalsovereignuniversity.org" class="nav-btn nav-gsu">üè† GSU Home</a>
  <a href="https://www.globalsovereignuniversity.org/mathification" class="nav-btn">üìê All Math Games</a>
</div>

<div class="badge-tag">üé§ Voice AI Tutor ‚Ä¢ Mathification</div>
<div class="header">
  <h1>üé¥ Make <span>24</span>!</h1>
  <div class="subtitle">Use all 4 numbers with +, ‚àí, √ó, √∑ to make exactly 24</div>
</div>

<div class="geno-bar">
  <img src="https://cdn.prod.website-files.com/690a4028667a2e2c27b665d0/6958183c01f7dfdad3fdb32b_Geno%20head.png" alt="GENO" class="geno-img" id="genoImg">
  <div class="geno-speech"><span class="geno-name">GENO:</span> <span id="genoTxt">Welcome to Make 24! I'll give you 4 numbers. Combine them using +, ‚àí, √ó, or √∑ to get exactly 24. You must use ALL four numbers. Ready?</span></div>
</div>

<div class="controls">
  <select class="ctrl-select" id="diffSelect">
    <option value="easy">üü¢ Easy (1-9)</option>
    <option value="medium" selected>üü° Medium (1-13)</option>
    <option value="hard">üî¥ Hard (1-20)</option>
  </select>
  <button class="ctrl-btn primary" onclick="newPuzzle()">üîÑ New Puzzle</button>
  <button class="ctrl-btn hint" onclick="showHint()">üí° Hint</button>
</div>

<div class="stats">
  <div class="stat"><div class="stat-val" id="solvedVal">0</div><div class="stat-lbl">Solved</div></div>
  <div class="stat"><div class="stat-val" id="streakVal">0</div><div class="stat-lbl">Streak</div></div>
  <div class="stat"><div class="stat-val" id="bestVal">0</div><div class="stat-lbl">Best Streak</div></div>
</div>

<div class="badges">
  <span class="badge-pill bronze" id="bBronze">ü•â Bronze</span>
  <span class="badge-pill silver" id="bSilver">ü•à Silver</span>
  <span class="badge-pill gold" id="bGold">ü•á Gold</span>
  <span class="badge-pill platinum" id="bPlat">üíé Platinum</span>
</div>

<!-- Number Cards -->
<div class="cards" id="cards"></div>

<!-- Operations -->
<div class="ops" id="ops">
  <div class="op-btn" data-op="+" onclick="selectOp(this)">+</div>
  <div class="op-btn" data-op="-" onclick="selectOp(this)">‚àí</div>
  <div class="op-btn" data-op="*" onclick="selectOp(this)">√ó</div>
  <div class="op-btn" data-op="/" onclick="selectOp(this)">√∑</div>
</div>

<!-- Expression -->
<div class="expression">
  <div class="expr-display" id="exprDisplay">Select a number, then an operation, then another number</div>
  <div class="expr-result" id="exprResult"></div>
</div>

<!-- Actions -->
<div class="actions">
  <button class="act-btn check" onclick="checkAnswer()">‚úÖ Check = 24?</button>
  <button class="act-btn undo" onclick="undoStep()">‚Ü©Ô∏è Undo</button>
  <button class="act-btn skip" onclick="skipPuzzle()">‚è≠Ô∏è Skip</button>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-box">
    <h2 id="modalTitle">üéâ You made 24!</h2>
    <p id="modalMsg"></p>
    <button class="ctrl-btn primary" onclick="closeModal()" style="margin-top:10px;padding:12px 24px">Next Puzzle ‚Üí</button>
  </div>
</div>

<div class="footer">
  <p><a href="https://www.globalsovereignuniversity.org">Global Sovereign University</a> ‚Ä¢ 501(c)(3) Nonprofit</p>
  <p style="margin-top:5px">"Building a Bridge to Freedom Through Education‚ÄîNot Handouts"</p>
</div>

</div>

<script>
(function(){

// Puzzle bank - guaranteed solvable sets [a,b,c,d]
const PUZZLES={
  easy:[
    [1,2,3,4],[1,3,4,6],[1,4,5,6],[1,5,6,8],[2,2,4,6],
    [2,3,4,4],[2,3,6,8],[2,4,6,8],[3,3,4,6],[3,4,4,6],
    [1,1,6,8],[1,2,6,8],[1,3,3,8],[2,2,6,6],[4,4,4,4],
    [1,1,4,6],[2,4,4,8],[3,3,8,8],[1,2,8,9],[1,6,6,9],
    [2,2,2,3],[1,3,6,6],[4,4,8,8],[1,1,3,8],[3,3,3,3],
    [2,6,7,9],[1,4,6,6],[2,3,3,4],[5,5,5,1],[8,8,3,3]
  ],
  medium:[
    [1,5,5,5],[2,7,8,9],[3,7,9,13],[1,4,11,12],[2,5,10,13],
    [3,6,10,11],[4,5,8,13],[1,7,10,12],[2,8,9,11],[5,6,7,12],
    [1,3,9,13],[4,7,11,12],[2,6,11,13],[3,5,12,13],[1,8,10,11],
    [6,6,10,10],[3,3,7,7],[5,5,11,11],[2,2,12,12],[4,4,8,8],
    [1,2,7,8],[3,4,5,6],[2,5,7,10],[1,6,9,12],[4,8,11,13],
    [3,7,8,12],[5,6,9,10],[1,11,12,13],[2,3,10,11],[4,5,9,13]
  ],
  hard:[
    [1,5,7,17],[2,9,14,19],[3,11,15,20],[4,8,16,18],[6,7,13,17],
    [1,3,14,16],[2,10,17,19],[5,8,12,20],[4,6,15,18],[7,9,11,13],
    [1,4,18,20],[2,7,15,16],[3,8,13,19],[5,6,14,17],[9,10,11,12],
    [1,2,11,20],[3,5,16,19],[4,7,14,18],[6,8,13,15],[2,9,12,17],
    [1,6,17,19],[3,4,15,20],[5,7,12,18],[2,8,14,16],[9,10,13,11],
    [1,8,15,20],[3,6,14,17],[2,5,16,19],[4,9,12,18],[7,10,11,13]
  ]
};

let nums=[],available=[],steps=[],selectedNum=null,selectedOp=null;
let solved=0,streak=0,best=0,currentSolution=null;

function speak(t){document.getElementById('genoTxt').textContent=t}

function shuffle(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}
  return a;
}

function newPuzzle(){
  const diff=document.getElementById('diffSelect').value;
  const bank=PUZZLES[diff];
  nums=shuffle(bank[Math.floor(Math.random()*bank.length)]);
  available=nums.map((n,i)=>({val:n,id:i,original:true}));
  steps=[];selectedNum=null;selectedOp=null;
  currentSolution=findSolution(nums);
  renderCards();
  renderExpr();
  document.getElementById('exprResult').textContent='';
  document.getElementById('exprResult').className='expr-result';
  speak(`New puzzle! Your numbers are ${nums.join(', ')}. Make them equal 24 using +, ‚àí, √ó, or √∑.`);
}

function renderCards(){
  const container=document.getElementById('cards');
  container.innerHTML='';
  available.forEach((item,idx)=>{
    const card=document.createElement('div');
    card.className='card'+(selectedNum===idx?' selected':'');
    card.textContent=Number.isInteger(item.val)?item.val:item.val.toFixed(2);
    card.onclick=()=>selectNum(idx);
    container.appendChild(card);
  });
  document.querySelectorAll('.op-btn').forEach(b=>b.classList.remove('selected'));
  if(selectedOp){
    document.querySelector(`.op-btn[data-op="${selectedOp}"]`).classList.add('selected');
  }
}

function selectNum(idx){
  if(selectedNum===null){
    selectedNum=idx;
    renderCards();
    speak(`Selected ${available[idx].val}. Now pick an operation.`);
  }else if(selectedOp!==null&&idx!==selectedNum){
    // Perform operation
    const a=available[selectedNum].val;
    const b=available[idx].val;
    let result;
    switch(selectedOp){
      case'+':result=a+b;break;
      case'-':result=a-b;break;
      case'*':result=a*b;break;
      case'/':
        if(b===0){speak("Cannot divide by zero!");selectedOp=null;renderCards();return}
        result=a/b;break;
    }
    
    steps.push({a,b,op:selectedOp,result,removedIndices:[selectedNum,idx],prevAvailable:JSON.parse(JSON.stringify(available))});
    
    // Remove used numbers, add result
    const newAvail=available.filter((_,i)=>i!==selectedNum&&i!==idx);
    newAvail.push({val:result,id:Date.now(),original:false});
    available=newAvail;
    selectedNum=null;selectedOp=null;
    renderCards();
    renderExpr();
    
    const opSymbol={'+':'+','-':'‚àí','*':'√ó','/':'√∑'}[steps[steps.length-1].op];
    speak(`${a} ${opSymbol} ${b} = ${Number.isInteger(result)?result:result.toFixed(2)}. ${available.length===1?'Check your answer!':'Pick your next numbers.'}`);
  }else{
    selectedNum=idx;
    renderCards();
  }
}

function selectOp(el){
  selectedOp=el.dataset.op;
  document.querySelectorAll('.op-btn').forEach(b=>b.classList.remove('selected'));
  el.classList.add('selected');
  if(selectedNum!==null)speak(`Now select the second number.`);
  else speak(`Pick a number first, then I'll apply ${el.textContent}.`);
}

function renderExpr(){
  const d=document.getElementById('exprDisplay');
  if(steps.length===0){
    d.innerHTML='Select a number, then an operation, then another number';
    return;
  }
  const opMap={'+':'+','-':'‚àí','*':'√ó','/':'√∑'};
  let html=steps.map(s=>{
    const rv=Number.isInteger(s.result)?s.result:s.result.toFixed(2);
    return `<span class="expr-num">${s.a}</span> <span class="expr-op">${opMap[s.op]}</span> <span class="expr-num">${s.b}</span> = <span class="expr-num">${rv}</span>`;
  }).join(' &nbsp;‚Üí&nbsp; ');
  d.innerHTML=html;
}

function checkAnswer(){
  if(available.length!==1){
    speak("You need to combine all numbers first! Keep going.");
    return;
  }
  const result=available[0].val;
  const res=document.getElementById('exprResult');
  if(Math.abs(result-24)<0.001){
    solved++;streak++;
    if(streak>best)best=streak;
    document.getElementById('solvedVal').textContent=solved;
    document.getElementById('streakVal').textContent=streak;
    document.getElementById('bestVal').textContent=best;
    updateBadges();
    res.textContent='= 24 ‚úì';res.className='expr-result success';
    document.getElementById('modalTitle').textContent='üéâ You made 24!';
    document.getElementById('modalMsg').textContent=`Solved: ${solved} | Streak: ${streak} | Best: ${best}`;
    document.getElementById('modal').classList.add('show');
    speak("You got 24! Excellent work!");
  }else{
    streak=0;
    document.getElementById('streakVal').textContent=0;
    const rv=Number.isInteger(result)?result:result.toFixed(2);
    res.textContent=`= ${rv} ‚úó (need 24)`;res.className='expr-result fail';
    speak(`That gives ${rv}, not 24. Try undoing and rearranging your operations.`);
  }
}

function undoStep(){
  if(steps.length===0){speak("Nothing to undo!");return}
  const last=steps.pop();
  available=last.prevAvailable;
  selectedNum=null;selectedOp=null;
  renderCards();renderExpr();
  document.getElementById('exprResult').textContent='';
  document.getElementById('exprResult').className='expr-result';
  speak("Undone! Try a different approach.");
}

function skipPuzzle(){
  streak=0;
  document.getElementById('streakVal').textContent=0;
  if(currentSolution){
    speak(`One solution was: ${currentSolution}. Let's try a new puzzle!`);
    document.getElementById('exprResult').textContent=`üí° Solution: ${currentSolution}`;
    document.getElementById('exprResult').className='expr-result';
  }
  setTimeout(newPuzzle,2500);
}

function showHint(){
  if(currentSolution){
    // Give a partial hint
    const parts=currentSolution.split(' ');
    const firstOp=parts.find(p=>['+','‚àí','√ó','√∑'].includes(p));
    speak(`Try using ${firstOp||'multiplication'} as one of your operations. Think about which two numbers combine well.`);
  }else{
    speak("Try different combinations. Remember, order of operations matters!");
  }
}

// Simple brute-force solver
function findSolution(numbers){
  const ops=['+','-','*','/'];
  const opSymbols={'+':'+','-':'‚àí','*':'√ó','/':'√∑'};
  const perms=[];
  const perm=(arr,l=[])=>{
    if(arr.length===0){perms.push(l);return}
    for(let i=0;i<arr.length;i++){
      const rest=[...arr];rest.splice(i,1);
      perm(rest,[...l,arr[i]]);
    }
  };
  perm(numbers);
  
  for(const p of perms){
    for(const o1 of ops){
      for(const o2 of ops){
        for(const o3 of ops){
          // ((a o1 b) o2 c) o3 d
          let r=calc(calc(calc(p[0],o1,p[1]),o2,p[2]),o3,p[3]);
          if(r!==null&&Math.abs(r-24)<0.001){
            return `((${p[0]} ${opSymbols[o1]} ${p[1]}) ${opSymbols[o2]} ${p[2]}) ${opSymbols[o3]} ${p[3]}`;
          }
          // (a o1 b) o2 (c o3 d)
          const left=calc(p[0],o1,p[1]);
          const right=calc(p[2],o3,p[3]);
          if(left!==null&&right!==null){
            r=calc(left,o2,right);
            if(r!==null&&Math.abs(r-24)<0.001){
              return `(${p[0]} ${opSymbols[o1]} ${p[1]}) ${opSymbols[o2]} (${p[2]} ${opSymbols[o3]} ${p[3]})`;
            }
          }
          // (a o1 (b o2 c)) o3 d
          const inner=calc(p[1],o2,p[2]);
          if(inner!==null){
            r=calc(calc(p[0],o1,inner),o3,p[3]);
            if(r!==null&&Math.abs(r-24)<0.001){
              return `(${p[0]} ${opSymbols[o1]} (${p[1]} ${opSymbols[o2]} ${p[2]})) ${opSymbols[o3]} ${p[3]}`;
            }
          }
        }
      }
    }
  }
  return null;
}

function calc(a,op,b){
  if(a===null||b===null)return null;
  switch(op){
    case'+':return a+b;
    case'-':return a-b;
    case'*':return a*b;
    case'/':return b===0?null:a/b;
  }
}

function closeModal(){
  document.getElementById('modal').classList.remove('show');
  newPuzzle();
}

function updateBadges(){
  if(solved>=3)document.getElementById('bBronze').classList.add('earned');
  if(solved>=10)document.getElementById('bSilver').classList.add('earned');
  if(solved>=20)document.getElementById('bGold').classList.add('earned');
  if(best>=10)document.getElementById('bPlat').classList.add('earned');
}

window.newPuzzle=newPuzzle;window.selectOp=selectOp;window.checkAnswer=checkAnswer;
window.undoStep=undoStep;window.skipPuzzle=skipPuzzle;window.showHint=showHint;window.closeModal=closeModal;
setTimeout(newPuzzle,100);
})();
</script>
</body>
</html>
